<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>文档标题</title>
</head>
 
<body>
 
	<p>Hello </p>

	<br>
	frequency
	<input type="range" id="fIn" min="40" max="6000" oninput="show()" />
	<span id="fOut"></span><br>
	type
	<input type="range" id="tIn" min="0" max="3" oninput="show()" />
	<span id="tOut"></span><br>
	volume
	<input type="range" id="vIn" min="0" max="100" oninput="show()" />
	<span id="vOut"></span><br>
	duration
	<input type="range" id="dIn" min="1" max="5000" oninput="show()" />
	<span id="dOut"></span><br>
	<br>
	<button onclick='beep();'>Play</button>

	<script type = "text/javascript">
		function getRandomInt(max) {
			return Math.floor(Math.random() * max);
		}
		function sayHi(){
			alert("Hi"+getRandomInt(3));
		}
		
		//global variable
		audioCtx = new(window.AudioContext || window.webkitAudioContext)();
		
		sayHi();
		show();

		function show() {
		  var frequency = document.getElementById("fIn").value;
		  document.getElementById("fOut").innerHTML = frequency + ' Hz';
		  var type;
		  switch (document.getElementById("tIn").value * 1) {
			case 0: type = 'sine'; break;
			case 1: type = 'square'; break;
			case 2: type = 'sawtooth'; break;
			case 3: type = 'triangle'; break;
		  }
		  document.getElementById("tOut").innerHTML = type;

		  var volume = document.getElementById("vIn").value / 100;
		  document.getElementById("vOut").innerHTML = volume;

		  var duration = document.getElementById("dIn").value;
		  document.getElementById("dOut").innerHTML = duration + ' ms';
		}

		function beep() {
		  var oscillator = audioCtx.createOscillator();
		  var gainNode = audioCtx.createGain();

		  oscillator.connect(gainNode);
		  gainNode.connect(audioCtx.destination);

		  gainNode.gain.value = document.getElementById("vIn").value/100;
		  oscillator.frequency.value = document.getElementById("fIn").value;
		  var type;
		  switch (document.getElementById("tIn").value * 1) {
			case 0: type = 'sine'; break;
			case 1: type = 'square'; break;
			case 2: type = 'sawtooth'; break;
			case 3: type = 'triangle'; break;
		  }
		  
		  
		  
		  oscillator.type = type;

		  oscillator.start();

		  setTimeout(
			function() {
			  oscillator.stop();
			},
			document.getElementById("dIn").value
		  );
		};	



	</script>

 
 
 
 
</body>
 
</html>



